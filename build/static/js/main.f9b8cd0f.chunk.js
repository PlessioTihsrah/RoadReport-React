(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,a){e.exports=a(265)},265:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(38),o=a.n(l),c=a(14),s=a(12),i=a(118),u=(a(132),a(19)),m=a(20),p=a(22),d=a(21),h=a(23),E=a(299),g=a(298),b=a(297),f=a(32),v=a(293),O=a(266),y=a(267),w=a(268),j=a(269),N=a(270),k=a(16),x=a.n(k),I=a(33),S=a(119),A=a.n(S).a.create({baseURL:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}}),C=a(120),T=a.n(C)()(),L=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).getData=function(e,t){return null==e?r.a.createElement("div",{className:"spinner-border text-light",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):e?r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement(v.a,{className:"nav-link text-light",to:"#"},"Hello, ",t)),r.a.createElement(O.a,null,r.a.createElement(v.a,{className:"nav-link text-light",to:"/view"},"View All Reports")),r.a.createElement(O.a,null,r.a.createElement("button",{onClick:a.props.signOut,className:"btn nav-link text-light"},"Logout"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement(v.a,{className:"nav-link",to:"/login"},"Login")),r.a.createElement(O.a,null,r.a.createElement(v.a,{className:"nav-link",to:"/signup"},"Signup")))},a.toggle=a.toggle.bind(Object(f.a)(Object(f.a)(a))),a.state={isOpen:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"componentDidMount",value:function(){this.props.getSignInStatus()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.a,{className:"navbar navbar-expand-lg navbar-dark sticky-top",style:{backgroundColor:"rgba(1,1,1,0.3)"}},r.a.createElement(v.a,{className:"navbar-brand",to:"/"},"Accident Report"),r.a.createElement(w.a,{onClick:this.toggle}),r.a.createElement(j.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(N.a,{className:"ml-auto",navbar:!0},this.getData(this.props.isSignedIn,this.props.user.email)))))}}]),t}(r.a.Component),R=Object(c.b)(function(e){return{user:e.auth.user,isSignedIn:e.auth.isSignedIn}},{getSignInStatus:function(){return function(){var e=Object(I.a)(x.a.mark(function e(t){var a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/info");case 2:a=e.sent,t({type:"GET_INFO",payload:{isSignedIn:a.data.isLoggedIn,user:a.data.user}});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},signOut:function(){return function(){var e=Object(I.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("/logout");case 2:200===e.sent.status&&t({type:"SIGN_OUT"});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}})(L),P=a(271),_=a(272),D=a(273),F=a(274),M=a(275),G=function(e){var t=e.src,a=e.title,n=e.subtitle,l=e.link;return r.a.createElement(P.a,{className:"border-light text-light",style:{backgroundColor:"rgba(1,1,1,0.6)"}},r.a.createElement(_.a,{top:!0,src:t,alt:""}),r.a.createElement(D.a,null,r.a.createElement(F.a,null,r.a.createElement("h5",null,a)),r.a.createElement(M.a,null,n),r.a.createElement(v.a,{className:"btn btn-outline-light btn-lg btn-block",to:l},"Enter")))},W=a(276),Y=a(277),U=a(278),q=a(294),B=[{src:"1.jpg",altText:"Slide 1"},{src:"2.jpg",altText:"Slide 2"},{src:"3.jpg",altText:"Slide 3"}],z=function(){return r.a.createElement(q.a,{items:B,indicators:!1})},J=Object(c.b)(function(e){return{isSignedIn:e.auth.isSignedIn}})(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,null),r.a.createElement(W.a,null,r.a.createElement(Y.a,{className:"mt-5"},r.a.createElement(U.a,null,r.a.createElement(G,{src:"pexels-photo-167964.jpg",title:"Report an Accident",subtitle:"Saw an Accident? Report with anonymity.",link:"/report"}),null===(t=e.isSignedIn)?r.a.createElement("div",{className:"spinner-border text-light",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):t?r.a.createElement(G,{src:"pexels-photo-669621.jpg",title:"See all Incidents",subtitle:"See all reported Incidents by people",link:"/view"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{src:"pexels-photo-938958.jpg",title:"From Insurance Company?",subtitle:"Login here",link:"/login"}),r.a.createElement(G,{src:"pexels-photo-923681.jpg",title:"From Police?",subtitle:"Login to See all reported Incidents",link:"/login"}))))));var t}),V=a(279),H=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).showPosts=function(e){if(0===e.length)return r.a.createElement("div",{className:"spinner-border text-light m-5 text-center",style:{width:"3rem",height:"3rem"},role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."));var t=e.map(function(e,t){return r.a.createElement("tbody",{key:e._id},r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},t+1),r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.date),r.a.createElement("td",null,r.a.createElement(v.a,{to:"/viewOne/".concat(e._id)},"Click here"))))});return r.a.createElement(V.a,{dark:!0,bordered:!0,style:{backgroundColor:"rgba(1,1,1,0.6)"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"S.No"),r.a.createElement("th",{scope:"col"},"ID"),r.a.createElement("th",{scope:"col"},"Date of Report"),r.a.createElement("th",{scope:"col"},"More Info"))),t)},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.getPosts()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container mt-5"},this.showPosts(this.props.posts))}}]),t}(r.a.Component),K=Object(c.b)(function(e){return{posts:e.report.posts}},{getPosts:function(){return function(){var e=Object(I.a)(x.a.mark(function e(t){var a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/reports");case 2:200===(a=e.sent).status&&t({type:"GET_POSTS",payload:a.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}})(H),Q=a(292),$=a(291),X=a(280),Z=a(281),ee=a(282),te=a(283),ae=a(284),ne=a(94),re=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.signIn(ne.stringify(e))},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"renderInput",value:function(e){var t=e.input,a=e.label,n="Email"===a?r.a.createElement(X.a,Object.assign({},t,{type:"email",required:!0,id:a})):r.a.createElement(X.a,Object.assign({},t,{type:"password",id:a,required:!0}));return r.a.createElement(Z.a,null,r.a.createElement(ee.a,{for:a,className:"text-light"},a),n)}},{key:"render",value:function(){return r.a.createElement(W.a,null,r.a.createElement(te.a,{className:"mt-5",onSubmit:this.props.handleSubmit(this.onSubmit)},r.a.createElement(Q.a,{name:"email",component:this.renderInput,label:"Email"}),r.a.createElement(Q.a,{name:"password",component:this.renderInput,label:"Password"}),r.a.createElement(ae.a,{outline:!0,color:"light"},"Login")))}}]),t}(r.a.Component),le=Object(c.b)(null,{signIn:function(e){return function(){var t=Object(I.a)(x.a.mark(function t(a){var n;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.post("/login",e);case 2:"success"===(n=t.sent).data.status?(a({type:"SIGN_IN",payload:n.data.user}),T.push("/")):T.push("/");case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}})(Object($.a)({form:"login"})(re)),oe=a(285),ce=a(300),se=a(94),ie=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).locError=function(e){e.preventDefault(),a.props.locationError()},a.getMap=function(){return"NA"!==a.props.latitude&&null!=a.props.latitude?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-light mt-3",id:"hehe"},r.a.createElement("h5",null,"Is this your current location?"),r.a.createElement(ae.a,{onClick:a.locationYes,color:"success",className:"mb-1"},"Yes, submit Report"),r.a.createElement(ae.a,{onClick:a.locError,color:"danger",className:"ml-2 mb-1"},"No")),r.a.createElement("iframe",{title:"map",width:"100%",height:"400",frameBorder:"0",src:"https://www.google.com/maps/embed/v1/search?key=AIzaSyDvc3HWIYxPNjvJVu4oNTLKMaAY3toI2pQ\n        &q=hospitals+near+me&center=".concat(a.props.latitude,",").concat(a.props.longitude,"\n        &zoom=20"),allowFullScreen:!0})):null==a.props.latitude?r.a.createElement("div",{className:"spinner-border text-light m-5 text-center",style:{width:"3rem",height:"3rem"},role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement("div",{className:"text-light mt-3"},r.a.createElement("h3",null,"Cannot get your Location. Please add accident location details in additional details"),r.a.createElement(ae.a,{color:"success",className:"mt-3",block:!0},"Submit Report"))},a.onSubmit=function(){var e=Object(I.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("/report",se.stringify({first:t.first,last:t.last,mobile:t.mobile,extra:t.extra,latitude:a.props.latitude,longitude:a.props.latitude}));case 2:"success"===e.sent.data.message&&T.push("/");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"renderInput",value:function(e){var t=e.input,a=e.label;switch(a){case"First Name":case"Last Name":return r.a.createElement("div",{className:"col"},r.a.createElement(ee.a,{htmlFor:a,className:"text-light mt-3"},r.a.createElement("h5",null,a,"*")),r.a.createElement(X.a,Object.assign({id:a},t,{type:"text",placeholder:a,required:!0})));case"Mobile No.":return r.a.createElement(oe.a,{className:"mb-3 mt-4"},r.a.createElement(ce.a,{addonType:"prepend"},"+91"),r.a.createElement(X.a,Object.assign({type:"number"},t,{"aria-describedby":"code",min:"4000000000",max:"9999999999",placeholder:a,required:!0})));case"Additional Details":return r.a.createElement(Z.a,null,r.a.createElement(ee.a,{for:"{label}",className:"text-light mt-3"},r.a.createElement("h4",null,a)),r.a.createElement(X.a,Object.assign({type:"textarea",htmlFor:"form"},t,{id:"{label}",rows:"3"})))}}},{key:"componentDidMount",value:function(){this.props.getLocation()}},{key:"render",value:function(){return r.a.createElement(W.a,null,r.a.createElement(te.a,{id:"form",className:"container mt-5",onSubmit:this.props.handleSubmit(this.onSubmit)},r.a.createElement(Y.a,null,r.a.createElement(Q.a,{name:"first",component:this.renderInput,label:"First Name"}),r.a.createElement(Q.a,{name:"last",component:this.renderInput,label:"Last Name"})),r.a.createElement(Q.a,{name:"mobile",component:this.renderInput,label:"Mobile No."}),r.a.createElement(Q.a,{name:"extra",component:this.renderInput,label:"Additional Details"}),r.a.createElement("div",{id:"map"},this.getMap())))}}]),t}(r.a.Component),ue=Object(c.b)(function(e){return{latitude:e.location.latitude,longitude:e.location.longitude}},{getLocation:function(){return function(e){navigator.geolocation.getCurrentPosition(function(t){e({type:"GET_LOCATION",payload:{latitude:t.coords.latitude,longitude:t.coords.longitude}})},function(t){e({type:"LOCATION_ERROR"})})}},locationError:function(){return{type:"LOCATION_ERROR"}}})(Object($.a)({form:"Report"})(ie)),me=a(286),pe=a(295),de=a(287),he=a(288),Ee=a(289),ge=a(290),be=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).getMap=function(){if(a.props.post&&"NA"!==a.props.post.latitude&&"undefined"!==a.props.post.latitude)return r.a.createElement(P.a,null,r.a.createElement(D.a,null,r.a.createElement("h1",{className:"card-title text-center"},"Location"),r.a.createElement("hr",null),r.a.createElement("iframe",{title:"map",width:"100%",height:"400",frameBorder:"0",src:"https://www.google.com/maps/embed/v1/view?key=AIzaSyDvc3HWIYxPNjvJVu4oNTLKMaAY3toI2pQ\n                    &center=".concat(a.props.post.latitude,",").concat(a.props.post.longitude,"\n                    &zoom=20"),allowFullScreen:!0}),r.a.createElement("hr",null),r.a.createElement(M.a,null,"The accident happened around this area. You can scroll the map for more information"),r.a.createElement(me.a,null,r.a.createElement("small",{className:"text-muted "},"Reported on ",a.props.post.date))))},a.getPhoto=function(e){if(e.length>0)return e.map(function(e){return r.a.createElement(P.a,{key:e},r.a.createElement(_.a,{top:!0,src:e,alt:""}),r.a.createElement(ae.a,{color:"dark",outline:!0,block:!0,onClick:a.toggle},"View"),r.a.createElement(pe.a,{isOpen:a.state.modal,toggle:a.toggle,className:a.props.className},r.a.createElement(de.a,null,r.a.createElement("img",{src:e,alt:"",width:"100%"})),r.a.createElement(he.a,null,r.a.createElement(ae.a,{color:"dark",outline:!0,block:!0,onClick:a.toggle},"Close"))))})},a.getPhotos=function(){return r.a.createElement(P.a,{className:"ml-1"},r.a.createElement(D.a,null,r.a.createElement(F.a,null,r.a.createElement("h1",{className:"text-center"},"Photographs")),r.a.createElement("hr",null),r.a.createElement(Ee.a,null,a.getPhoto(a.props.post.photos))))},a.getDetails=function(){return r.a.createElement(P.a,{class:"ml-1"},r.a.createElement(D.a,null,r.a.createElement(F.a,null,r.a.createElement("h1",{class:"text-center"},"Details")),r.a.createElement("hr",null),r.a.createElement(M.a,{className:"mt-4"},r.a.createElement("span",{class:"h5"},r.a.createElement("b",null,"Reported By: ")),a.props.post.name),r.a.createElement(M.a,null,r.a.createElement("span",{class:"h5"},r.a.createElement("b",null,"Mobile Number: ")),"+91",a.props.post.mobile),r.a.createElement(M.a,null,r.a.createElement("span",{class:"h5"},r.a.createElement("b",null,"Additional Details: ")),a.props.post.extra),r.a.createElement("hr",null),r.a.createElement(M.a,null,r.a.createElement("span",{class:"h5"},r.a.createElement("b",null,"Injuries: ")),a.props.post.injuries),r.a.createElement(M.a,null,r.a.createElement("span",{class:"h5"},r.a.createElement("b",null,"Interview with eyewitness: ")),a.props.post.interview),r.a.createElement(M.a,null,r.a.createElement("span",{class:"h5"},r.a.createElement("b",null,"Reason for Accident: ")),a.props.post.reason),r.a.createElement(M.a,null,r.a.createElement("span",{class:"h5"},r.a.createElement("b",null,"Road Conditions: ")),a.props.post.conditions),r.a.createElement(M.a,null,r.a.createElement("span",{class:"h5"},r.a.createElement("b",null,"Speed: ")),a.props.post.speed),r.a.createElement("hr",null),r.a.createElement(me.a,null,r.a.createElement(v.a,{class:"btn btn-outline-dark btn-block",to:"/add/".concat(a.props.match.params.id)},"Add Photographs"),r.a.createElement(v.a,{class:"btn btn-outline-dark btn-block",to:"/addinfo/".concat(a.props.match.params.id)},"Add/Edit Information"))))},a.state={modal:!1},a.toggle=a.toggle.bind(Object(f.a)(Object(f.a)(a))),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"componentDidMount",value:function(){this.props.getPost(this.props.match.params.id)}},{key:"render",value:function(){return this.props.post._id?r.a.createElement(W.a,null,r.a.createElement(ge.a,null,this.getMap(),this.getPhotos(),this.getDetails())):r.a.createElement("div",null)}}]),t}(r.a.Component),fe=Object(c.b)(function(e){return{post:e.report.post}},{getPost:function(e){return function(){var t=Object(I.a)(x.a.mark(function t(a){var n;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.get("/report/".concat(e));case 2:200===(n=t.sent).status&&a({type:"GET_POST",payload:n.data});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}})(be),ve=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E.a,{history:T},r.a.createElement("div",null,r.a.createElement(R,null),r.a.createElement(g.a,null,r.a.createElement(b.a,{path:"/",exact:!0,component:J}),r.a.createElement(b.a,{path:"/view",exact:!0,component:K}),r.a.createElement(b.a,{path:"/login",exact:!0,component:le}),r.a.createElement(b.a,{path:"/report",exact:!0,component:ue}),r.a.createElement(b.a,{path:"/viewOne/:id",exact:!0,component:fe})))))}}]),t}(r.a.Component),Oe=a(296),ye=a(29),we={isSignedIn:null,user:{}},je={latitude:null,longitude:null},Ne={posts:[],post:{}},ke=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(ye.a)({},e,{isSignedIn:!0,user:t.payload});case"SIGN_OUT":return Object(ye.a)({},e,{isSignedIn:!1,user:{}});case"GET_INFO":return Object(ye.a)({},e,{isSignedIn:t.payload.isSignedIn,user:t.payload.user});default:return e}},form:Oe.a,location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LOCATION":return Object(ye.a)({},e,{latitude:t.payload.latitude,longitude:t.payload.longitude});case"LOCATION_ERROR":return Object(ye.a)({},e,{latitude:"NA",longitude:"NA"});default:return e}},report:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_POSTS":return Object(ye.a)({},e,{posts:t.payload});case"GET_POST":return Object(ye.a)({},e,{post:t.payload});default:return e}}}),xe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ie(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(c.a,{store:Object(s.d)(ke,Object(s.a)(i.a))},r.a.createElement(ve,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");xe?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ie(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Ie(t,e)})}}()}},[[124,2,1]]]);
//# sourceMappingURL=main.f9b8cd0f.chunk.js.map